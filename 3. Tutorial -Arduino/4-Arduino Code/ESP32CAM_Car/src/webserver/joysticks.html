<!DOCTYPE HTML>
<html>
	<head>
		<title>Joy</title>
		<meta charset="utf-8">
		<meta name="description" content="ESP32 Remote Controller for Car">
		<meta name="author" content="Matan Levy">
		<script src="https://levymatan.github.io/JoyStick/joy.js"></script>
	</head>

	<body>
        <div id="joyDiv-turn" style="width:200px;height:200px;margin-bottom:20px;"></div>
        <div id="joyDiv-speed" style="width:200px;height:200px;margin-bottom:20px;"></div>
        <p id="speed-value">Speed Value: </p>
        <p id="turn-value">Turn Value: </p>
        <script type="text/javascript">
            var speed = 0;
            var turn = 0;
            function sendGetWithParams(speed_arg, turn_arg)
            {
                var xhttp = new XMLHttpRequest();
                var arg = speed_arg + "," + turn_arg;
                xhttp.open('GET', 'move' + '?' + arg, true); 
                xhttp.send()
            }

            function updateHtmlInfo(speed_arg, turn_arg)
            {
                document.getElementById("speed-value").innerHTML = speed_arg;
                document.getElementById("turn-value").innerHTML = turn_arg;
            }
                                       
            var JoyTurn = new JoyStick('joyDiv-turn', {}, function(stickData) {
                turn = stickData.x;
                updateHtmlInfo(speed, turn);
                sendGetWithParams(speed, turn);
            });
            
            var JoySpeed = new JoyStick('joyDiv-speed', {}, function(stickData) {
                speed = stickData.y;
                updateHtmlInfo(speed, turn);
                sendGetWithParams(speed, turn);
            });
        </script>
    </body>

</html>
